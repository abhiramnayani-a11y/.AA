<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Shooter Game</title>
  <style>
    body { margin: 0; font-family: Arial; background: #111; color: white; overflow: hidden; }
    canvas { background: #1a1a1a; display: block; margin: auto; }
    .ui { position: absolute; top: 10px; left: 10px; }
    .menu, .pause, .gameover, .win, .howto {
      position: absolute; inset: 0; background: rgba(0,0,0,0.9);
      display: flex; flex-direction: column; justify-content: center; align-items: center;
    }
    button { padding: 10px 20px; margin: 8px; font-size: 16px; cursor: pointer; }
  </style>
</head>
<body>
<canvas id="game" width="900" height="500"></canvas>

<div class="menu" id="menu">
  <h1>SHOOTER GAME</h1>
  <button onclick="startGame()">Start Game</button>
  <button onclick="showHowTo()">How To Play</button>
</div>

<div class="howto" id="howto" style="display:none">
  <h2>HOW TO PLAY</h2>
  <p><b>Movement (WASD)</b></p>
  <p>W – Move forward (up)</p>
  <p>S – Move backward (down)</p>
  <p>A – Move left</p>
  <p>D – Move right</p>
  <br>
  <p><b>Combat</b></p>
  <p>Mouse Move – Aim the gun</p>
  <p>Left Mouse Click – Shoot</p>
  <br>
  <p><b>Game Controls</b></p>
  <p>P – Pause / Resume</p>
  <p>ESC – Back to Main Menu</p>
  <br>
  <p><b>Objective</b></p>
  <p>Defeat enemies and reach 500 score each level.</p>
  <p>Beat all 3 levels to win.</p>
  <button onclick="backToMenu()">Back</button>
</div>

<div class="pause" id="pause" style="display:none">
  <h2>Paused</h2>
  <button onclick="resume()">Resume</button>
  <button onclick="backToMenu()">Menu</button>
</div>

<div class="win" id="win" style="display:none">
  <h1>You Win!</h1>
  <button onclick="backToMenu()">Menu</button>
</div>

<div class="gameover" id="gameover" style="display:none">
  <h1>Game Over</h1>
  <button onclick="backToMenu()">Menu</button>
</div>

<script>
const canvas = document.getElementById('game');
const ctx = canvas.getContext('2d');

let state = 'menu';
let keys = {};
let bullets = [];
let enemies = [];
let score = 0;
let level = 1;

const levels = {
  1: { playerHP: 200, enemyHP: 50, enemyDMG: 20, speed: 1.5, points: 10 },
  2: { playerHP: 350, enemyHP: 80, enemyDMG: 50, speed: 2.2, points: 15 },
  3: { playerHP: 500, enemyHP: 120, enemyDMG: 70, speed: 2.8, points: 20 }
};

let player = { x: 450, y: 250, hp: 200, speed: 3 };

function startGame() {
  document.getElementById('menu').style.display = 'none';
  resetLevel();
  state = 'play';
}

function resetLevel() {
  bullets = [];
  enemies = [];
  score = 0;
  player.hp = levels[level].playerHP;
}

function showHowTo() {
  document.getElementById('menu').style.display = 'none';
  document.getElementById('howto').style.display = 'flex';
}

function backToMenu() {
  location.reload();
}

function resume() {
  document.getElementById('pause').style.display = 'none';
  state = 'play';
}

window.addEventListener('keydown', e => {
  keys[e.key.toLowerCase()] = true;
  if (e.key === 'p' && state === 'play') {
    state = 'pause';
    document.getElementById('pause').style.display = 'flex';
  }
});
window.addEventListener('keyup', e => keys[e.key.toLowerCase()] = false);

canvas.addEventListener('click', e => {
  if (state !== 'play') return;
  bullets.push({ x: player.x, y: player.y, dx: (e.offsetX-player.x)/10, dy:(e.offsetY-player.y)/10 });
});

function spawnEnemy() {
  enemies.push({ x: Math.random()*900, y: Math.random()*500, hp: levels[level].enemyHP });
}

function update() {
  if (state !== 'play') return;

  if (keys['w']) player.y -= player.speed;
  if (keys['s']) player.y += player.speed;
  if (keys['a']) player.x -= player.speed;
  if (keys['d']) player.x += player.speed;

  bullets.forEach(b => { b.x += b.dx; b.y += b.dy; });

  enemies.forEach(e => {
    let dx = player.x - e.x;
    let dy = player.y - e.y;
    let dist = Math.hypot(dx,dy);
    e.x += dx/dist * levels[level].speed;
    e.y += dy/dist * levels[level].speed;
    if (dist < 20) player.hp -= levels[level].enemyDMG;
  });

  bullets.forEach((b, bi) => {
    enemies.forEach((e, ei) => {
      if (Math.hypot(b.x-e.x,b.y-e.y)<15) {
        e.hp -= 30;
        bullets.splice(bi,1);
        if (e.hp<=0) {
          enemies.splice(ei,1);
          score += levels[level].points;
        }
      }
    });
  });

  if (Math.random()<0.02) spawnEnemy();

  if (player.hp<=0) {
    state='over';
    document.getElementById('gameover').style.display='flex';
  }

  if (score>=500) {
    if (level<3) { level++; resetLevel(); }
    else { document.getElementById('win').style.display='flex'; state='win'; }
  }
}

function draw() {
  ctx.clearRect(0,0,900,500);
  ctx.fillStyle='cyan'; ctx.fillRect(player.x-10,player.y-10,20,20);
  ctx.fillStyle='yellow'; bullets.forEach(b=>ctx.fillRect(b.x,b.y,5,5));
  ctx.fillStyle='red'; enemies.forEach(e=>ctx.fillRect(e.x-10,e.y-10,20,20));
  ctx.fillStyle='white'; ctx.fillText(`HP: ${player.hp} Score: ${score} Level: ${level}`,10,20);
}

function loop() {
  update(); draw(); requestAnimationFrame(loop);
}
loop();
</script>
</body>
</html>
